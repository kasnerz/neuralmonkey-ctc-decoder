#!/bin/bash

LM_NGRAMS=5
CTC_WEIGHT=1.0

# declare -a MODEL_TYPES=(
#     # "b10"
#     # "b20"
#     # "complex-shared-pos-b10"
#     # "complex-shared-pos-b20"
#     # "pos-b10"
#     # "pos-b20"
#     # "shared-b10"
#     # "shared-b20"
#     "shared-pos-b10"
#     # "shared-pos-b20"
# )

# for MODEL_TYPE in "${MODEL_TYPES[@]}"; do
#     for LM_WEIGHT in "${LM_WEIGHTS[@]}"; do
#         for N_WEIGHT in "${N_WEIGHTS[@]}"; do
#             qsub -q gpu-ms.q -cwd -now no -l gpu=1,mem_free=32G -pty yes -m n ./generate_output.sh $MODEL_TYPE $LM_NGRAMS $CTC_WEIGHT $LM_WEIGHT $N_WEIGHT $N_WEIGHT
#         done
#     done
# done

MODEL_TYPE="shared-pos-b10"
DATA_TYPE="val"
CHECKPOINT_TYPE="avg"

LANG1="en"
LANG2="de"

LM_WEIGHTS=(0.014 0.113 0.191 0.074 0.128 0.008 0.097 0.074 0.138 0.126 0.102 0.187 0.048 0.165 0.024 0.182 0.153 0.086 0.115 0.053 0.093 0.039 0.156 0.063 0.119 0.090 0.156 0.194 0.011 0.131 0.139 0.079 0.020 0.175 0.125 0.006 0.033 0.135 0.068 0.114 0.017 0.032 0.133 0.086 0.053 0.068 0.083 0.138 0.173 0.161 0.062 0.197 0.054 0.182 0.194 0.049 0.184 0.083 0.069 0.180 0.042 0.068 0.072 0.058 0.056 0.146 0.126 0.001 0.101 0.063 0.049 0.137 0.132 0.181 0.061 0.067 0.156 0.097 0.046 0.034 0.047 0.113 0.048 0.007 0.167 0.047 0.041 0.087 0.089 0.110 0.182 0.186 0.116 0.119 0.053 0.137 0.159 0.017 0.138 0.053)

NT_WEIGHTS=(-0.122 -0.136 -0.004 -0.016 -0.014 -0.108 -0.013 -0.171 -0.105 -0.144 -0.070 -0.117 -0.163 -0.132 -0.141 -0.172 -0.032 -0.057 -0.047 -0.146 -0.044 -0.103 -0.053 -0.135 -0.059 -0.137 -0.180 -0.139 -0.099 -0.154 -0.009 -0.092 -0.139 -0.058 -0.177 -0.010 -0.086 -0.083 -0.055 -0.046 -0.036 -0.082 -0.171 -0.175 -0.161 -0.090 -0.163 -0.165 -0.183 -0.084 -0.190 -0.183 -0.049 -0.005 -0.030 -0.180 -0.094 -0.046 -0.169 -0.107 -0.040 -0.066 -0.148 -0.191 -0.032 -0.069 -0.013 -0.080 -0.024 -0.109 -0.164 -0.005 -0.026 -0.067 -0.140 -0.182 -0.164 -0.160 -0.063 -0.184 -0.173 -0.137 -0.164 -0.095 -0.176 -0.130 -0.125 -0.197 -0.014 -0.072 -0.071 -0.190 -0.014 -0.050 -0.097 -0.144 -0.171 -0.173 -0.106 -0.036)

NR_WEIGHTS=(-0.050 -0.160 -0.101 -0.007 -0.148 -0.149 -0.029 -0.038 -0.064 -0.186 -0.128 -0.156 -0.055 -0.043 -0.108 -0.136 -0.054 -0.156 -0.181 -0.193 -0.125 -0.054 -0.151 -0.045 -0.029 -0.003 -0.097 -0.032 -0.130 -0.087 -0.192 -0.199 -0.065 -0.037 -0.024 -0.161 -0.057 -0.130 -0.168 -0.019 -0.030 -0.183 -0.047 -0.180 -0.077 -0.016 -0.021 -0.154 -0.108 -0.118 -0.169 -0.110 -0.040 -0.014 -0.184 -0.002 -0.062 -0.063 -0.096 -0.063 -0.032 -0.151 -0.150 -0.115 -0.196 -0.088 -0.166 -0.193 -0.004 -0.126 -0.127 -0.024 -0.170 -0.142 -0.060 -0.149 -0.036 -0.010 -0.173 -0.151 -0.178 -0.135 -0.128 -0.071 -0.175 -0.095 -0.186 -0.165 -0.056 -0.188 -0.111 -0.100 -0.122 -0.124 -0.124 -0.196 -0.014 -0.045 -0.184 -0.168)

for index in ${!LM_WEIGHTS[*]}; do 
    qsub -q cpu-ms.q -cwd -now no -l "mem_free=32G,hostname=!lucifer*" -pty yes -m n -o ./out~ -e ./out~ ./generate_output.sh $LANG1 $LANG2 $MODEL_TYPE $DATA_TYPE $CHECKPOINT_TYPE 1.0 ${LM_WEIGHTS[$index]} ${NT_WEIGHTS[$index]} ${NR_WEIGHTS[$index]}
done

